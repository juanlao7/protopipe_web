<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <base href="/protopipe_web/" />
    <meta charset="UTF-8" />

    {% if site.google_analytics %}
      <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '{{ site.google_analytics }}');
      </script>
    {% endif %}

{% seo %}
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#537abd" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}" />
  </head>

  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name"><a href="">{{ site.title }}</a></h1>
      <h2 class="project-tagline">{{ page.description | default: site.description | default: site.github.project_tagline }}</h2>
    </header>

    <main id="content" class="main-content" role="main">
      {% assign baseURL = '.' | append: page.url %}
      <div id="toc">{% include toc.html html=content h_min=3 baseurl=baseURL %}</div>

      {{ content }}

      <footer class="site-footer">
        <a href="help.html" class="btn">Help</a>
        <a href="contact.html" class="btn">Contact</a>
      </footer>
    </main>

    <script type="text/javascript">
        var toc = document.getElementById('toc');
        
        if (window.location.pathname.indexOf('/cards/') >= 0) {
          toc.parentNode.removeChild(toc);
        }
        else {
          toc.parentNode.insertBefore(toc, document.getElementsByTagName('h3')[0]);
        }

        var imgs = document.getElementsByTagName('img');

        for (var i = 0; i < imgs.length; ++i) {
          var img = imgs[i];

          if (img.classList.contains('hardcoded')) {
            continue;
          }

          var container = document.createElement('div');
          container.className = 'img';
          var link = document.createElement('a');
          link.setAttribute('href', img.src);
          link.setAttribute('target', '_blank');
          img.setAttribute('srcset', img.src + ' 2x');
          img.removeAttribute('src');
          img.parentNode.replaceChild(container, img);
          link.appendChild(img);
          container.appendChild(link);
        }
    </script>
  </body>
</html>